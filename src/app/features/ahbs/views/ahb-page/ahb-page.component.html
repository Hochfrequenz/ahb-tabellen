<app-header>
  <form [formGroup]="headerSearchForm">
    <app-format-version-select
      id="format-version-input"
      formControlName="formatVersion"
    />
    @if (
      headerSearchForm.controls.formatVersion.errors?.["required"] &&
      (headerSearchForm.controls.formatVersion.dirty ||
        headerSearchForm.controls.formatVersion.touched)
    ) {
      <p class="text-red-800">Dieses Feld ist ein Pflichtfeld</p>
    }
    <app-pruefi-input
      id="pruefi-input"
      formControlName="pruefi"
      [formatVersion]="headerSearchForm.controls.formatVersion.value"
    />
    @if (
      headerSearchForm.controls.pruefi.errors?.["required"] &&
      (headerSearchForm.controls.pruefi.dirty ||
        headerSearchForm.controls.pruefi.touched)
    ) {
      <p class="text-red-800">Dieses Feld ist ein Pflichtfeld</p>
    }

    <!-- Submit button -->
    <button type="submit" (click)="onClickHeaderSearchSubmit()">
      Dokument Ã¶ffnen
    </button>
  </form>
</app-header>

@if (ahb$ | async; as ahb) {
  <section>
    <pre>{{ ahb.meta | json }}</pre>
  </section>
  <section>
    <input
      type="search"
      (search)="onSearchQueryChange()"
      placeholder="Tabelle durchsuchen"
      [formControl]="searchQuery"
    />
    @if (lines$ | async; as lines) {
      <app-ahb-table [lines]="lines" />
    }
  </section>
} @else {
  loading ...
}
